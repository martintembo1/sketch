class Cookies {

constructor() {
this.app = 'Moult.cookies';
}

async call(req,res) {
res.cookies = {};
res.cookie = function(cookie, value, exp=1,path='/') {
let date = new Date();
date.setMonth(date.getMonth() + exp);
date = date.toUTCString();
res.cookies[cookie] = `${cookie}=${value}; Path=${path}; Expires=${date}`;
let cookies = [];
Array.from(Object.entries(res.cookies))
.forEach((v,i) => { cookies[i]=v[1]; });
this.setHeader('Set-Cookie', cookies);
return true;
}

req.cookies = {};
let cookies = req.headers.cookie ? req.headers.cookie.split(';') : [];
cookies.forEach((cookie) => {
let split = cookie.split("=");
req.cookies[split[0].trimLeft()] = split[1].trimRight();
});
}

}

module.exports = Cookies;